<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profil Utilisateur - Le Petit Marché</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/utilisateur.css') }}">
</head>
<body>
    <header>
        <h1>Mon Profil</h1>
        <button id="shop-btn" onclick="window.location.href='/boutique'">Boutique</button>
        <a href="{{ url_for('auth.logout') }}"><button id="logout-btn">Déconnexion</button></a> <!-- Lien vers la route logout -->
    </header>

    <main>
        <div class="info">
            <button id="edit-info-btn">Modifier</button>
            <p><strong>Nom :</strong> <span id="nom">{{ user.nom }}</span></p>
            <p><strong>Prénom :</strong> <span id="prenom">{{ user.prenom }}</span></p>
            <p><strong>Email :</strong> <span id="email">{{ user.email }}</span></p>
            <p><strong>Adresse :</strong> <span id="adresse">{{ user.adresse }}</span></p>
            
            <!-- Formulaire de modification -->
            <form id="edit-form" class="hidden" action="{{ url_for('user.update_profile') }}" method="POST">
                <label>Nom : <input type="text" name="nom" value="{{ user.nom }}"></label>
                <label>Prénom : <input type="text" name="prenom" value="{{ user.prenom }}"></label>
                <label>Email : <input type="email" name="email" value="{{ user.email }}"></label>
                <label>Adresse : <input type="text" name="adresse" value="{{ user.adresse }}"></label>
                <button type="submit">Enregistrer</button>
                <button type="button" id="cancel-btn">Annuler</button>
            </form>
        </div>

        <section class="order-history">
            <h2>Mes Commandes</h2>
            <table>
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Commande</th>
                        <th>Montant</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody id="orders-list">
                    {% for order in user.orders %} <!-- Remplace par tes données réelles -->
                    <tr>
                        <td>{{ order.date }}</td>
                        <td>{{ order.items }}</td>
                        <td>{{ order.amount }}€</td>
                        <td>{{ order.status }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </section>
    </main>

    <script src="{{ url_for('static', filename='js/utilisateur.js') }}"></script>
</body>
</html>
