<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Se connecter - Le Petit Marché</title>
  <link rel="stylesheet" href="{{url_for('static',filename='css/login.css')}}"> 
</head>
<body>
  <header>
    <h1>Se connecter</h1>
  </header>

  <!-- Formulaire de connexion -->

  {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
          <ul style="color: red;">
          {% for category, message in messages %}
              <li>{{ message }}</li>
          {% endfor %}
          </ul>
      {% endif %}
  {% endwith %}

  <form method="POST" action="{{ url_for('main.login') }}">
      <label for="email">Email :</label>
      <input type="email" id="email" name="email" required><br>

      <label for="password">Mot de passe :</label>
      <input type="password" id="password" name="password" required><br>

      <button type="submit">Se connecter</button>
  </form>

  <div class="auth-buttons">
    {% if current_user.is_authenticated %}
        <button id="logout-btn" onclick="logout()">Logout</button>
    {% else %}
        <a href="{{ url_for('main.login') }}"><button id="login-btn">Se connecter</button></a>
    {% endif %}
</div>


  <p>Pas encore de compte ? <a href="{{url_for('main.register')}}">Créer un compte</a></p>

  <footer>
    <p>© 2025 Le Petit Marché</p>
  </footer>

  <script src="{{url_for('static',filename='js/app.js')}}"></script>
</body>
</html>
